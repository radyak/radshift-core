<div class="container">

    <h2>
        <mat-icon [inline]="true">group</mat-icon>
        User Administration
    </h2>

    <mat-expansion-panel *ngFor="let user of users">
        <mat-expansion-panel-header>
            <mat-panel-title>
                <mat-icon>person</mat-icon>
                {{ user.username }}
            </mat-panel-title>
        </mat-expansion-panel-header>

        <edit-user [user]="user"
                   (onDeleteUser)="deleteUser(user)"
        ></edit-user>
    </mat-expansion-panel>

    <mat-expansion-panel class="create-user-panel">
        <mat-expansion-panel-header>
            <mat-panel-title>
                <mat-icon>person_add</mat-icon>
                Create new user
            </mat-panel-title>
        </mat-expansion-panel-header>

        <form [formGroup]="newUserForm" (ngSubmit)="submitNewUser()">
            <mat-form-field appearance="outline">
                <mat-label>Username</mat-label>
                <input matInput placeholder="Username" name="username" type="text" id="username"
                    formControlName="username">
                <error-hint [control]="newUserForm?.controls?.username" validatorRule="USERNAME"></error-hint>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Password</mat-label>
                <input matInput placeholder="Password" name="password" type="password" id="password"
                    formControlName="password">
                <mat-icon matSuffix>security</mat-icon>
                <error-hint [control]="newUserForm?.controls?.password" validatorRule="PASSWORD"></error-hint>
            </mat-form-field>
            <mat-form-field appearance="outline">
                <mat-label>Repeat password</mat-label>
                <input matInput placeholder="Repeat password" name="passwordRepeat" type="password" id="passwordRepeat"
                    formControlName="passwordRepeat">
                <mat-icon matSuffix>security</mat-icon>
                <error-hint [control]="newUserForm?.controls?.passwordRepeat" message="Password and password repeat must match"></error-hint>
            </mat-form-field>


            <div class="control-container">
                <button type="submit" mat-stroked-button color="primary" [disabled]="!newUserForm.valid">
                    <mat-icon>person_add</mat-icon>
                    Create user
                </button>
            </div>
        </form>

    </mat-expansion-panel>

</div>